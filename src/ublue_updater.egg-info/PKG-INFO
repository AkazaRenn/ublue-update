Metadata-Version: 2.1
Name: ublue-updater
Version: 1.0.0
Summary: Ublue System Updater
Author: gerblesh
Author-email: gerblesh <01901964+gerblesh@users.noreply.github.com>
License: Apache-2
Keywords: ublue,update
Requires-Python: >=3.10
Description-Content-Type: text/markdown
License-File: LICENSE

# Universal Blue Update

Small update program written in python intended for use in Universal Blue, executes update scripts/tasks placed in `/etc/ublue-update.d` (make sure each script has exec perms)

Includes systemd timers and services for auto update

dependencies (fedora): ```sudo dnf install python3-notify2 python3-psutil```


# Usage


## Installation

You can add this to your image by simply pulling down and installing the rpm:

```
COPY --from=ghcr.io/ublue-os/ublue-update:latest /rpms/ublue-update.noarch.rpm /tmp/rpms/
RUN rpm-ostree install /tmp/rpms/ublue-update.noarch.rpm
```

If you are on an image derived from uBlue main:

```
COPY --from=ghcr.io/ublue-os/ublue-update:latest /rpms/ublue-update.noarch.rpm /tmp/rpms/
RUN rpm-ostree override remove ublue-os-update-services && rpm-ostree install /tmp/rpms/ublue-update.noarch.rpm
```

## Command Line

```
usage: ublue-update [-h] [-f] [-c]

options:
  -h, --help   show this help message and exit
  -f, --force  force manual update, skipping update checks
  -c, --check  run update checks and exit
```


# Configuration


## Location
valid config paths (in order of priority)

```"$HOME"/.config/ublue-update/ublue-update.conf```

```/etc/ublue-update/ublue-update.conf```

```/usr/etc/ublue-update/ublue-update.conf```


## Config Variables
section: `checks`

`battery_percent`: checks if battery is above specified percent

`cpu_load`: checks if cpu average load is under specified percent

